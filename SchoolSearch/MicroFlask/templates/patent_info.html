<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>{{ school_name }}-专利</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>
<h2>{{ school_name }}-专利</h2>
<table class="table table-hover" style="width: 80%" id="patent-info">
    <tr>
        <th>标题</th>
        <th>作者</th>
        <th>日期</th>
    </tr>
</table>
</body>
<script type="text/javascript">
    let school_name = "{{ school_name }}";
    let teacher_list = "{{ teacher_list }}";
    let separation = "{{ separation }}";
    //分割
    let teacher_array = teacher_list.split(separation);
    //异步获取数据
    $.ajax({
        url: '/api/patent',
        type: 'GET',
        dataType: 'json',
        data: {school_name: school_name, "teacher_list": teacher_array},
        success: loadDataSuccess,
    });
    function loadDataSuccess(json_data) {
        console.log(json_data);
        for (let index in json_data){
            let item = json_data[index];
            let html = "<tr><td>" + item["title"] + "</td><td>" + item["author_list"] + "</td><td>" + item["date1"] + "</td></tr>";
            $("#patent-info").append(html);
        }
    }
</script>
</html>